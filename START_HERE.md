# üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Stvor –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

---

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

–ü–æ–ª—É—á–∏ –æ—Ç —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
- **IP –∞–¥—Ä–µ—Å** —Å–µ—Ä–≤–µ—Ä–∞
- **–õ–æ–≥–∏–Ω** (–æ–±—ã—á–Ω–æ `root` –∏–ª–∏ `ubuntu`)
- **–ü–∞—Ä–æ–ª—å** –∏–ª–∏ **SSH –∫–ª—é—á**

–ü–æ–¥–∫–ª—é—á–∏—Å—å –ø–æ SSH:

```bash
ssh root@your-server-ip
# –∏–ª–∏
ssh ubuntu@your-server-ip
```

–ï—Å–ª–∏ –ø—Ä–æ—Å—è—Ç –ø–∞—Ä–æ–ª—å - –≤–≤–µ–¥–∏ –µ–≥–æ.

---

## –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Git

–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–∫–æ–ø–∏—Ä—É–π –ø–æ –æ–¥–Ω–æ–π):

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
sudo apt install -y docker.io docker-compose git

# –ó–∞–ø—É—Å–∫ Docker
sudo systemctl start docker
sudo systemctl enable docker

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –í—ã—Ö–æ–¥ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥ (—á—Ç–æ–±—ã –ø—Ä–∞–≤–∞ –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É)
exit
```

**–í—ã–π–¥–∏ –∏–∑ SSH –∏ –∑–∞–π–¥–∏ —Å–Ω–æ–≤–∞** (—á—Ç–æ–±—ã –ø—Ä–∞–≤–∞ docker –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É).

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤—Å—ë —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

```bash
docker --version
docker-compose --version
git --version
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç - –≤—Å—ë —Ö–æ—Ä–æ—à–æ! ‚úÖ

---

## –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–£ —Ç–µ–±—è –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:

### –í–∞—Ä–∏–∞–Ω—Ç A: –°–æ–∑–¥–∞—Ç—å /var/www (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

```bash
# –°–æ–∑–¥–∞–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
sudo mkdir -p /var/www
sudo chown $USER:$USER /var/www

# –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /var/www

# –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/olegseyewich/stvorchat.git

# –ü–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd stvorchat
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–ø—Ä–æ—â–µ)

```bash
# –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~

# –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/olegseyewich/stvorchat.git

# –ü–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cd stvorchat
```

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞—Ä–∏–∞–Ω—Ç A** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, –Ω–æ –µ—Å–ª–∏ –ª–µ–Ω—å - –∏—Å–ø–æ–ª—å–∑—É–π –í–∞—Ä–∏–∞–Ω—Ç B, –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ —Ç–∞–º.

---

## –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

### 4.1 –°–æ–∑–¥–∞–π .env –∏–∑ –ø—Ä–∏–º–µ—Ä–∞

```bash
cp .env.example .env
```

–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ `.env.example` –Ω–µ—Ç, —Å–æ–∑–¥–∞–π `.env` –≤—Ä—É—á–Ω—É—é:

```bash
nano .env
```

### 4.2 –ó–∞–ø–æ–ª–Ω–∏ .env —Ñ–∞–π–ª

–í—Å—Ç–∞–≤—å –≤ —Ñ–∞–π–ª –∏ **–∑–∞–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–∏**:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=stvar
POSTGRES_PASSWORD=—Ç–≤–æ–π_—Å–∏–ª—å–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–º–∏–Ω–∏–º—É–º_16_—Å–∏–º–≤–æ–ª–æ–≤
POSTGRES_DB=stvar

# JWT (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)
JWT_SECRET=—Ç–≤–æ–π_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
JWT_EXPIRES_IN=7d

# API
PORT=4000
CLIENT_ORIGIN=http://—Ç–≤–æ–π-ip-–∞–¥—Ä–µ—Å,http://—Ç–≤–æ–π-–¥–æ–º–µ–Ω.com

# Frontend
VITE_API_URL=http://—Ç–≤–æ–π-ip:4000
VITE_SOCKET_URL=http://—Ç–≤–æ–π-ip:4000

# HTTP –ø–æ—Ä—Ç
HTTP_PORT=80
```

**–í–∞–∂–Ω–æ:**
- `POSTGRES_PASSWORD` - –ø—Ä–∏–¥—É–º–∞–π —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å (16+ —Å–∏–º–≤–æ–ª–æ–≤)
- `JWT_SECRET` - –ø—Ä–∏–¥—É–º–∞–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (32+ —Å–∏–º–≤–æ–ª–∞)
- `CLIENT_ORIGIN` - –∑–∞–º–µ–Ω–∏ `—Ç–≤–æ–π-ip-–∞–¥—Ä–µ—Å` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π IP —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `http://185.123.45.67`)
- –ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ–º–µ–Ω - –¥–æ–±–∞–≤—å –µ–≥–æ —Ç–æ–∂–µ: `http://185.123.45.67,http://stvor.com`

**–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª:** `Ctrl+O`, `Enter`, `Ctrl+X`

---

## –®–∞–≥ 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ –ª–µ–Ω—å –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –ø–∞—Ä–æ–ª–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π –∏—Ö:

```bash
# –ü–∞—Ä–æ–ª—å –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (16 —Å–∏–º–≤–æ–ª–æ–≤)
openssl rand -base64 12

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT (32+ —Å–∏–º–≤–æ–ª–∞)
openssl rand -base64 32
```

–°–∫–æ–ø–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—Å—Ç–∞–≤—å –≤ `.env` —Ñ–∞–π–ª.

---

## –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞! üöÄ

```bash
# –°–¥–µ–ª–∞–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x deploy.sh

# –ó–∞–ø—É—Å—Ç–∏ –¥–µ–ø–ª–æ–π
./deploy.sh production
```

–ü–æ–¥–æ–∂–¥–∏ 2-3 –º–∏–Ω—É—Ç—ã, –ø–æ–∫–∞ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

---

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker-compose -f docker-compose.prod.yml ps
```

–í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `Up`. ‚úÖ

–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):

```bash
docker-compose -f docker-compose.prod.yml logs
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–≤–æ–π –ø—Ä–æ–µ–∫—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω:

- **Frontend (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å):** `http://—Ç–≤–æ–π-ip` –∏–ª–∏ `http://—Ç–≤–æ–π-–¥–æ–º–µ–Ω`
- **API:** `http://—Ç–≤–æ–π-ip:4000` –∏–ª–∏ `http://—Ç–≤–æ–π-–¥–æ–º–µ–Ω:4000`

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ–≤–µ—Ä—å!

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –û—à–∏–±–∫–∞: "permission denied"
```bash
sudo chown -R $USER:$USER /var/www/stvorchat
```

### –û—à–∏–±–∫–∞: –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80
sudo netstat -tlnp | grep :80

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç 4000
sudo netstat -tlnp | grep :4000
```

### –û—à–∏–±–∫–∞: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏
docker-compose -f docker-compose.prod.yml logs

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏
docker-compose -f docker-compose.prod.yml restart
```

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞:** `git pull` –∏ `./deploy.sh production`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è:** —Å–º. [DEPLOY.md](./DEPLOY.md)
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:** `docker-compose -f docker-compose.prod.yml logs -f`
- **–û—Å—Ç–∞–Ω–æ–≤–∫–∞:** `docker-compose -f docker-compose.prod.yml down`

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º–æ—Ç—Ä–∏ [DEPLOY.md](./DEPLOY.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

